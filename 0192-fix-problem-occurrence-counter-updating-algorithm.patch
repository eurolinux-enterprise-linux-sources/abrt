From eb6c1c4b0ac2b9e38abcee97afe9ba479c6dbf34 Mon Sep 17 00:00:00 2001
From: Jakub Filak <jfilak@redhat.com>
Date: Wed, 21 Nov 2012 17:12:59 +0100
Subject: [ABRT EL6 PATCH 192/197] fix problem occurrence counter updating
 algorithm

- closes trac#878

Signed-off-by: Jakub Filak <jfilak@redhat.com>
---
 src/daemon/abrtd.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/daemon/abrtd.c b/src/daemon/abrtd.c
index 6e73cb3..85f39fb 100644
--- a/src/daemon/abrtd.c
+++ b/src/daemon/abrtd.c
@@ -400,14 +400,15 @@ static gboolean handle_event_output_cb(GIOChannel *gio, GIOCondition condition,
         {
             log("'post-create' on '%s' killed by signal %d",
                             state->dirname, WTERMSIG(status));
+            goto delete_bad_dir;
         }
         /* else: it is WIFEXITED(status) */
         else if (!state->dup_of_dir)
         {
             log("'post-create' on '%s' exited with %d",
                             state->dirname, WEXITSTATUS(status));
+            goto delete_bad_dir;
         }
-        goto delete_bad_dir;
     }
 
     char *work_dir = state->dup_of_dir ? state->dup_of_dir : state->dirname;
-- 
1.8.2.1

